{% extends 'reviews/base.html' %} {{ form_title }} {% block content %}
<div class="bg-white rounded-lg shadow-xl p-6 md:p-8 max-w-2xl mx-auto">
  <h1 class="text-3xl font-bold text-gray-900 mb-6 text-center">
    {{ form_title }}
  </h1>

  <form method="post" novalidate>
    {% csrf_token %}

    <div class="space-y-6">
      <!-- Product Field (Only for create view) -->
      {% if 'create' in request.path %}
      <div>
        <label
          for="id_product"
          class="block text-sm font-medium text-gray-700 mb-1"
          >Product</label
        >
        <select
          name="product"
          id="id_product"
          class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
        >
          <option value="" disabled selected>--- Select a Product ---</option>
          {% for product in products %}
          <option value="{{ product.id }}">{{ product.name }}</option>
          {% endfor %}
        </select>
        {% if form.product.errors %}
        <div class="text-red-500 text-sm mt-1">{{ form.product.errors }}</div>
        {% endif %}
      </div>
      {% endif %}

      <!-- Rating Field -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2"
          >Your Rating</label
        >
        <div
          class="star-rating flex flex-row-reverse justify-center items-center"
        >
          <input type="radio" name="rating" id="star5" value="5" class="sr-only"
          required {% if form.instance.rating == 5 %}checked{% endif %}>
          <label
            for="star5"
            class="text-gray-300 hover:text-yellow-400 cursor-pointer text-4xl"
            title="Excellent"
            ><i class="fas fa-star"></i
          ></label>
          <input type="radio" name="rating" id="star4" value="4" class="sr-only"
          required {% if form.instance.rating == 4 %}checked{% endif %}>
          <label
            for="star4"
            class="text-gray-300 hover:text-yellow-400 cursor-pointer text-4xl"
            title="Very Good"
            ><i class="fas fa-star"></i
          ></label>
          <input type="radio" name="rating" id="star3" value="3" class="sr-only"
          required {% if form.instance.rating == 3 %}checked{% endif %}>
          <label
            for="star3"
            class="text-gray-300 hover:text-yellow-400 cursor-pointer text-4xl"
            title="Good"
            ><i class="fas fa-star"></i
          ></label>
          <input type="radio" name="rating" id="star2" value="2" class="sr-only"
          required {% if form.instance.rating == 2 %}checked{% endif %}>
          <label
            for="star2"
            class="text-gray-300 hover:text-yellow-400 cursor-pointer text-4xl"
            title="Fair"
            ><i class="fas fa-star"></i
          ></label>
          <input type="radio" name="rating" id="star1" value="1" class="sr-only"
          required {% if form.instance.rating == 1 %}checked{% endif %}>
          <label
            for="star1"
            class="text-gray-300 hover:text-yellow-400 cursor-pointer text-4xl"
            title="Poor"
            ><i class="fas fa-star"></i
          ></label>
        </div>
        {% if form.rating.errors %}
        <div class="text-red-500 text-sm mt-1 text-center">
          {{ form.rating.errors }}
        </div>
        {% endif %}
      </div>

      <!-- Comment Field -->
      <div>
        <label
          for="id_comment"
          class="block text-sm font-medium text-gray-700 mb-1"
          >Your Comment (optional)</label
        >
        <textarea
          name="comment"
          id="id_comment"
          rows="4"
          class="mt-1 shadow-sm block w-full sm:text-sm border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500"
        >
{{ form.instance.comment|default_if_none:'' }}</textarea
        >
        {% if form.comment.errors %}
        <div class="text-red-500 text-sm mt-1">{{ form.comment.errors }}</div>
        {% endif %}
      </div>
    </div>

    <div class="mt-8 flex justify-end">
      <a
        href="{% url 'review-list' %}"
        class="bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
      >
        Cancel
      </a>
      <button
        type="submit"
        class="ml-3 inline-flex justify-center py-2 px-6 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
      >
        Save
      </button>
    </div>
  </form>
</div>

<style>
  .star-rating > input:checked ~ label,
  .star-rating:not(:checked) > label:hover,
  .star-rating:not(:checked) > label:hover ~ label {
    color: #facc15; /* Same as Tailwind yellow-400 */
  }
</style>
{% endblock %}
