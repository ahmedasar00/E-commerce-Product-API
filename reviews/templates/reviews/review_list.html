{% extends 'reviews/base.html' %} {% block title %}All Reviews{% endblock %} {%
block content %}
<div class="bg-white rounded-lg shadow-xl p-6 md:p-8">
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-3xl font-bold text-gray-900">All Reviews</h1>
    <a
      href="{% url 'review-create' %}"
      class="inline-block px-6 py-2.5 bg-indigo-600 text-white font-medium text-sm leading-tight uppercase rounded-md shadow-md hover:bg-indigo-700 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out"
    >
      <i class="fas fa-plus mr-2"></i> Add New Review
    </a>
  </div>

  <div class="space-y-6">
    {% for review in reviews %}
    <div
      class="border border-gray-200 rounded-lg p-5 hover:shadow-lg transition-shadow duration-300 bg-gray-50"
    >
      <div class="flex items-start">
        <!-- User avatar placeholder -->
        <div class="flex-shrink-0 mr-4">
          <div
            class="w-12 h-12 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold text-xl"
          >
            {{ review.user.username|first|upper }}
          </div>
        </div>

        <div class="flex-grow">
          <div class="flex items-center justify-between">
            <div>
              <p class="font-bold text-lg text-gray-800">
                {{ review.user.username }}
              </p>
              <p class="text-sm text-gray-500">
                reviewed
                <span class="font-semibold text-indigo-600"
                  >{{ review.product.name }}</span
                >
              </p>
            </div>
            <!-- Edit/Delete buttons visible only to the owner -->
            {% if review.user == request.user %}
            <div class="flex items-center space-x-2">
              <a
                href="{% url 'review-update' review.pk %}"
                class="text-gray-400 hover:text-blue-500"
                title="Edit"
                ><i class="fas fa-edit"></i
              ></a>
              <a
                href="{% url 'review-delete' review.pk %}"
                class="text-gray-400 hover:text-red-500"
                title="Delete"
                ><i class="fas fa-trash"></i
              ></a>
            </div>
            {% endif %}
          </div>

          <!-- Star rating -->
          <div class="flex items-center my-2">
            <div class="text-yellow-400">
              {% for i in "12345" %} {% if forloop.counter <= review.rating %}
              <i class="fas fa-star"></i>
              {% else %}
              <i class="far fa-star"></i>
              {% endif %} {% endfor %}
            </div>
            <span class="text-sm text-gray-600 ml-2"
              >({{ review.rating }} stars)</span
            >
          </div>

          <p class="text-gray-700 mt-2">{{ review.comment|linebreaksbr }}</p>
          <p class="text-xs text-gray-400 mt-3 text-right">
            {{ review.created_at|date:"d M Y, P" }}
          </p>
        </div>
      </div>
    </div>
    {% empty %}
    <div class="text-center py-10 px-6 bg-gray-50 rounded-lg">
      <i class="fas fa-comments fa-3x text-gray-300 mb-4"></i>
      <h3 class="text-lg font-medium text-gray-700">No reviews yet</h3>
      <p class="text-sm text-gray-500">Be the first to add a review!</p>
    </div>
    {% endfor %}
  </div>
</div>
